<!DOCTYPE html>
<html>
<!--
    Exchange the line above for this to enable offline support
    <html manifest="manifest.appcache">

    Please make your homework before doing this:
        http://www.alistapart.com/articles/application-cache-is-a-douchebag/
        http://appcachefacts.info

    This might be necessary to set up on your server, to make sure
    files are updated when the appcache file itself is:
        https://github.com/robnyman/Firefox-OS-Boilerplate-App/blob/gh-pages/.htaccess
 -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <!-- <link rel="stylesheet" type="text/css" href="css/base.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/headers.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/buttons.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/toolbars.css"> -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <link href="http://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css" rel="stylesheet">
    <link href="http://code.jquery.com/ui/1.8.21/themes/ui-lightness/jquery-ui.css" rel="stylesheet">

    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <!-- prerequisites -->
    <script src="js/jquery.ui.touch-punch.min.js"></script>
    <script src="js/jquery.touchy.min.js"></script>

    <script type="text/javascript" src="js/app.js"></script>

    <script src="js/jquery.ui.rotatable.js"></script>
    <!-- this is small and will allow you to override look/feel of handle -->
    <link rel="stylesheet" href="css/jquery.ui.rotatable.css">

    <title>Sticky</title>

    <style type="text/css" media="screen">
      #target3 {
      width: 160px;
      height: 90px;
      padding: 0;
      //border: 1px solid #862dde;
      }
      #target3 img {
      width: 100%;
      height: 100%;
      }

      #nwgrip, #negrip, #swgrip, #segrip, #ngrip, #egrip, #sgrip, #wgrip {
          width: 10px;
          height: 10px;
          background-color: #ffffff;
          border: 1px solid #000000;
      }
      #nwgrip {
          left: -5px;
          top: -5px;
      }
      #negrip{
           top: -5px;
           right: -5px;
      }
      #swgrip{
          bottom: -5px;
          left: -5px;
      }
      #segrip{
           bottom: -5px;
          right:-5px;
      }
      #ngrip{
           top: -5px;
          left:50%;
      }
      #sgrip{
           bottom: -5px;
          left: 50%;
      }
      #wgrip{
           left:-5px;
           top:50%;
      }
      #egrip{
           right:-5px;
           top:50%;
      }
    </style>



    <script type="text/javascript" charset="utf-8">

      $(document).ready(function() {

          $('#target3').draggable({
            containment: "#canvas",
            scroll: false
          });
          $('#target3').resizable({
            containment: "#canvas",
            handles: {
                    'nw': '#nwgrip',
                    'ne': '#negrip',
                    'sw': '#swgrip',
                    'se': '#segrip',
                    'n': '#ngrip',
                    'e': '#egrip',
                    's': '#sgrip',
                    'w': '#wgrip'
                }
          });
          $('#target3').rotatable();

          // intro screen
          $("#intro-screen").click(function(){
            $("#intro-screen").fadeOut(300);
          })
          // end intro screen


          var d_canvas = document.getElementById('canvas');
          var context = d_canvas.getContext('2d');

          //add sticker to screen
          var sticker = document.getElementById('resizable');
          $('#resizable').hide();
          $( "#resizable" ).draggable({
            containment: "#canvas",
            scroll: false
          });

          n = 0;
          $("#resizable").click(function(){
            //alert("asdf");
            if (n == 0) {

              $("#resizable").resizable({
                containment: "#canvas"
              });
              //$("#resizable").draggable();
              n = 1;
              //alert(n);
            }

            else if (n == 1){
              n = 0;
              //alert(n);
              $("#resizable").draggable({
                containment: "#canvas",
                scroll: false
              });
              $('#resizable').resizable('destroy');
            }

          });


          // Save/Share button
          //this should move up a button list with
          //Save to Gallery
          //Clear
          //Cancel
          $('#save-btn').click(function() {
              $(".overlay").remove();
              $( "#done-panel" ).animate({
                  bottom: "-300"
              }, 200);
              //alert("tset");
              var $sticker = $('#resizable'),
                  $canvas = $('#canvas');
              var sticker_x = $sticker.offset().left - $canvas.offset().left,
                  sticker_y = $sticker.offset().top - $canvas.offset().top;

              context.drawImage(sticker, sticker_x, sticker_y);

              $sticker.hide();
              //$(this).attr('disabled', 'disabled');
          });

      });
    </script>

</head>

<body>

    <div id="intro-screen" class="page">
      <div class="main-text">
            <h1>Sticky</h1>
            <p>Tap to start!</p>
      </div>
    </div>

    <div id="canvas-area" class="page">

      <div id="target3" >
        <img src="images/stickers/fox-mask.png" />
        <div class="ui-resizable-handle ui-resizable-nw" id="nwgrip"></div>
        <div class="ui-resizable-handle ui-resizable-ne" id="negrip"></div>
        <div class="ui-resizable-handle ui-resizable-sw" id="swgrip"></div>
        <div class="ui-resizable-handle ui-resizable-se" id="segrip"></div>
        <div class="ui-resizable-handle ui-resizable-n" id="ngrip"></div>
        <div class="ui-resizable-handle ui-resizable-s" id="sgrip"></div>
        <div class="ui-resizable-handle ui-resizable-e" id="egrip"></div>
        <div class="ui-resizable-handle ui-resizable-w" id="wgrip"></div>
      </div>

      <canvas id="canvas" width="300" height="300" ></canvas>
      <img src="images/stickers/fox-mask.png" id="resizable" />
      <div class="bottom-bar">
        <button class="btn btn-default pick-from-lib-btn pull-left">New</button>
        <button class="btn btn-primary stickers-btn pull-left">Stickers</button>
        <button class="btn btn-default done-btn pull-right">Done</button>
      </div>
    </div>




    <div id="done-panel" class="panel panel-default">
      <div class="panel-body">
        <button type="button" class="btn btn-primary btn-lg btn-block" id="save-btn" >Save to Gallery</button>
        <button type="button" class="btn btn-default btn-lg btn-block" id="btn-clear">Clear</button>
        <button type="button" class="btn btn-default btn-lg btn-block" id="btn-cancel" href="">Cancel</button>
      </div>
    </div>

    <div id="stickers-screen" class="page">
      <!-- stickers go here and slideup/down-->
      <div class="top-bar">
        <button class="btn btn-default close-btn pull-right">Close</button>
      </div>
      <div class="main-section">
        <div class="row">
          <div class="col-xs-4">
            <div class="sticker sticker-1">
              <img src="images/stickers/fox-mask.png" style="width: 100%; height: 100%;" />
            </div>
          </div>
          <div class="col-xs-4">
            <div class="sticker">
              <img src="images/stickers/sunglasses.png" style="width: 100%; height: 100%;" />
            </div>
          </div>
          <div class="col-xs-4">
            <div class="sticker">
              sticker 3
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-4">
            <div class="sticker">
              sticker 1
            </div>
          </div>
          <div class="col-xs-4">
            <div class="sticker">
              sticker 2
            </div>
          </div>
          <div class="col-xs-4">
            <div class="sticker">
              sticker 3
            </div>
          </div>
        </div>
      </div>
      <div class="bottom-bar">
        <a class="btn-left"><</a>
        <a class="btn-right">></a>
      </div>
    </div>

    <script type="text/javascript" src="js/base.js"></script>
    <script type="text/javascript" src="js/webapp.js"></script>
    <script type="text/javascript" src="js/offline.js"></script>
    <!-- <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script> -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    <script type="text/javascript" src="js/moveSticker.js"></script>


    <!--
        Loosely based on fxosstub: https://github.com/Jaxo/fxosstub
    -->

</body>
</html>
